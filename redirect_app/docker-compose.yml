
version: '3.8'

services:
  # HTTPS 리다이렉트 서버 (443 포트)
  https:
    build: .
    container_name: mochachat-https
    ports:
      - "443:443"
    volumes:
      # 파일을 직접 마운트
      - ./certs:/app/certs:ro
    environment:
      - ENV=production
      - LOG_LEVEL=info
      - PORT=443
      - SSL_CERT_FILE=/app/certs/mochachat.crt
      - SSL_KEY_FILE=/app/certs/mochachat.key
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
